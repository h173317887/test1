<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <style>
        * {
            margin: 0;
            padding: 0;
        }
        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            box-sizing: border-box;
            background-image: url('https://img2.baidu.com/it/u=2508772139,680455438&fm=253&fmt=auto&app=138&f=JPEG?w=500&h=1082');
            background-size: cover;

        }


        .container .mask {
            position: absolute;
            width: 100%;
            height: 90%;
            overflow: hidden;
        }

        .container span {
            position: absolute;
            color: #000;
            white-space: nowrap;
        }
        .container .btn {
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            bottom: 20px;
        }
    </style>
</head>

<body>
    <div class="container">
        <div class="mask">
        </div>
        <button class="btn">å…³é—­/å¼€å¯å¼¹å¹•</button>
    </div>
    <script>
        const data = [


            {
                content: 'é™ˆè–‡è–‡ğŸ®å•Šå•Š',
                time: 0
            },
            {
                content: 'é™ˆè–‡è–‡666',
                time: 0
            },
            {
                content: 'é™ˆè–‡è–‡ç‰›å“‡ç‰›å“‡',
                time: 1
            },
            {
                content: 'æ˜¯æ„Ÿè§‰æµªè´¹çš„æ—¶é—´äº†',
                time: 2
            },
            {
                content: 'æ˜¯çš„å‘ç”Ÿç‡å¾—åˆ†è®°å½•è®°å½•',
                time: 2
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 3
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 3
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 4
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 4
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 5
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 5
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 5
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 6
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 6
            },
            {
                content: 'ä½ å¥½å•Šå“ˆå“ˆå“ˆ',
                time: 6
            }
        ]
        const container = document.querySelector('.mask');
        const btn = document.querySelector('.btn');
        const containerWidth = container.clientWidth;
        const maxLine = 16;
        const lineHeight = 30;
        let currentLine = 0;
        let timeout = 0;
        let isOpen = true;
        const duration = 15;
        function createDanmu(content) {
            const danmuItem = document.createElement('span');
            danmuItem.innerText = content;
            danmuItem.style.left = containerWidth + 'px';
            danmuItem.style.top = currentLine * lineHeight + 'px';
            danmuItem.speed = getRandomSpeed(100, 301);
            danmuItem.selfLeft = containerWidth;
            container.appendChild(danmuItem);
            danmuItem.selfWidth = danmuItem.clientWidth;
            currentLine = (currentLine + 1) % maxLine;
        }

        function getRandomSpeed(min, max) {
            return Math.floor(Math.random() * (max - min) + min);
        }

        function startMove() {
            if (timeout) return;
            timeout = setInterval(() => {
                for (let i = 0; i < container.children.length; i++) {
                    const danmuItem = container.children[i];
                    danmuItem.selfLeft -= danmuItem.speed / 1000 * duration;
                    danmuItem.style.left = danmuItem.selfLeft + 'px';
                    if (danmuItem.selfLeft < -(danmuItem.selfWidth)) {
                        danmuItem.remove();
                        i--;
                    }
                }
            }, duration)
        }

        function generateDanmu(arr) {
            let str = 'é™ˆè–‡è–‡ğŸ®ï¼ç®€ç›´æ˜¯';
            for (const key in obj) {
                const index = getRandomSpeed(0, obj[key].length);
                str += obj[key][index];
            }
            createDanmu(str);
        }
        setInterval(() => {
            generateDanmu();
        }, 500)
        startMove()
        btn.onclick = function () {
            isOpen = !isOpen;
            if (!isOpen) {
                console.log(99)
                clearInterval(timeout);
                timeout = null;
                return;
            }
            startMove();
            return;
        }

        const arr1 = [
            "å¼€æœ—",
            "å¤§æ–¹",
            "ä¸»åŠ¨",
            "å¤–å‘",
            "ä¿çš® ",
            "æ•æ· ",
            "ä¹è§‚ ",
            "è°ƒçš®",
            " çˆ½è„†",
            " çˆ½æœ— ",
            "è±ªçˆ½",
            "å–„è‰¯", "çº¯æ´", "æ´»æ³¼", "å¼€æœ—", "å¤©çœŸ", "ç‡ç›´", "å«ç¾", "è…¼è…†"
        ];
        const arr2 = [
            "æ­£ç›´",
            " ç›´ç‡",
            " ç›´çˆ½",
            " å¹²è„†",
            " ç›´è¨€",
            " çˆ½ç›´",
            " åˆšç›´ ",
            "æ†¨ç›´",
            " è€¿ç›´ ",
            "å…¬æ­£",
            " å…¬é“",
            " å…¬å¹³",
            " å…¬å…",
            "æ­£æ´¾",
            " çˆ½å¿«",
            " ç®€æ· ",
            "å¼€é˜”",
            " è±è¾¾ ",
            "æ˜æœ—",
            " çœŸè¯š",
            " çƒ­è¯š",
            " è‡³è¯š",
            " èµ¤è¯š",
            " è¯šæŒš",
            " æ³åˆ‡ ",
            "çº¯çœŸ",
            " å¦ç‡"
        ]
        const arr3 = [
            "ç¬ƒå®çƒ­å¿±",
            " çƒ­è¯š çƒ­å¿ƒ",
            " å¥½å®¢ ",
            "å®¢æ°” ",
            "æ®·å‹¤",
            " å’Œæ°”",
            " å’Œè”¼",
            " å’Œå–„",
            " å’Œå©‰",
            " å’Œæ‚¦ ",
            "å’Œæ˜“",
            " äº²åˆ‡",
            " è¿‡è°¦",
            " è°¦å‘",
            " è°¦æ­",
            " è°¦å’Œ ",
            "è°¦è®©",
            " è°¦è™š",
            " è°¦é€Š",
            " è™šå¿ƒ"
        ]
        const arr6 = [
            "å®Œç¾æ— ç¼º", "ç©ºå‰ç»å", "ä¸‡å¤æµèŠ³",
            "èŠ±è§èŠ±å¼€", "ç¾è²Œå¦‚èŠ±", "å¤©ä»™ä¸‹å‡¡", "æ¥šæ¥šåŠ¨äºº",
            "å¤©ç”Ÿä¸½è´¨", "æ…§è´¨å…°å¿ƒ", "ç§€å¤–æ…§ä¸­", "æš—é¦™ç›ˆè¢–"
        ];
        const arr5 = [
            "è‡ªè°¦å¼ºç¡¬",
            " å¼ºæ‚",
            " å¼ºåŠ²",
            " åšå†³",
            " åšä¿¡",
            " åšå®š",
            " åšéŸ§ ",
            "åšå®",
            " åšæ¯…",
            " åšè´",
            " ä¸­åš",
            " æ¯…åŠ›"
        ]
        const arr4 = [
            "å‹‡æ•¢",
            " å‹‡çŒ›",
            " åˆšæ¯…",
            " æœæ•¢ ",
            "æœå†³",
            " åšæ¯…",
            " åšå¼º",
            " åšå¿",
            " å†³ç„¶",
            " æ¯…ç„¶"
        ]
        const arr7 = [
            "èŠ±å®¹æœˆè²Œ",
            "è²Œç¾å¦‚èŠ±",
            "é—­æœˆç¾èŠ±",
            "è‹±ä¿Šæ½‡æ´’",
            "ç‰æ ‘ä¸´é£",
            "èªæ˜ç»é¡¶",
            "å†°é›ªèªæ˜",
            "æ´»æ³¼å¼€æœ—"
        ]

        const obj = {
            arr1,
            arr2,
            arr3,
            arr4,
            arr5,
            arr6,
            arr7
        }

    </script>
</body>

</html>
